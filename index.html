<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„ í˜•íšŒê·€ë€ ë¬´ì—‡ì¼ê¹Œìš”?</title>
    <script src="chart.umd.min.js"></script>
    <style>
        /* ìƒˆë¡œ ì¶”ê°€í•œ ğŸ¯ ì•„ì´ì½˜ì— ëŒ€í•œ ìŠ¤íƒ€ì¼ */
#ridgeIcon {
    margin-right: 5px; /* í…ìŠ¤íŠ¸ì™€ì˜ ê°„ê²© */
    color: #ef4444; /* ë¹¨ê°„ìƒ‰ ê³„ì—´ë¡œ ëª©í‘œ(ğŸ¯) ê°•ì¡° */
    cursor: pointer; /* ë§ˆìš°ìŠ¤ ì»¤ì„œë¥¼ ì†ê°€ë½ ëª¨ì–‘ìœ¼ë¡œ ë°”ê¿”ì„œ í´ë¦­ ê°€ëŠ¥í•¨ì„ í‘œì‹œ */
    font-size: 1.2em; /* í¬ê¸° ì•½ê°„ í‚¤ìš°ê¸° */
    font-weight: bold;
}
/* [ìˆ˜ì •] íŒì—… ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ - íˆ´íŒì²˜ëŸ¼ ë³´ì´ë„ë¡ ìˆ˜ì • */
#sparrowPopup {
    position: absolute; /* í•µì‹¬: ì ˆëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì • (í´ë¦­ ìœ„ì¹˜ ê¸°ì¤€ìœ¼ë¡œ í‘œì‹œ) */
    background-color: #374151; /* ì–´ë‘ìš´ ë°°ê²½ */
    color: white; /* í°ìƒ‰ ê¸€ì */
    padding: 6px 10px; /* ì‘ì€ í¬ê¸° */
    border-radius: 4px;
    font-size: 0.85em; /* ì‘ì€ ê¸€ì”¨ */
    font-weight: normal;
    white-space: nowrap; /* ë‚´ìš©ì´ í•œ ì¤„ë¡œ ë‚˜ì˜¤ë„ë¡ */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    opacity: 0; 
    pointer-events: none; 
    transition: opacity 0.2s ease-in-out; 
}

#sparrowPopup.show {
    opacity: 1;
}

/* íˆ´íŒ ê¼¬ë¦¬(ì„ íƒ ì‚¬í•­: ë” íˆ´íŒì²˜ëŸ¼ ë³´ì´ê²Œ ì¶”ê°€) */
#sparrowPopup::after {
    content: "";
    position: absolute;
    top: -5px; /* íˆ´íŒ ìœ„ìª½ì— ê¼¬ë¦¬ê°€ ë‚˜ì˜¤ë„ë¡ ìœ„ì¹˜ ì¡°ì • */
    left: 10px;
    border-width: 5px;
    border-style: solid;
    border-color: transparent transparent #374151 transparent; /* ê¼¬ë¦¬ ìƒ‰ìƒ */
}
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #7c3aed;
            margin-bottom: 10px;
            font-size: 2em;
        }
        
        .subtitle {
            text-align: center;
            color: #6b7280;
            margin-bottom: 30px;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .panel {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .panel h2 {
            color: #7c3aed;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .setting-group {
            margin-bottom: 24px;
            padding: 16px;
            border-radius: 8px;
        }
        
        .setting-group.purple { background: #faf5ff; }
        .setting-group.blue { background: #eff6ff; }
        .setting-group.yellow { background: #fefce8; }
        .setting-group.green { background: #f0fdf4; }
        
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
        }
        
        select, input[type="range"] {
            width: 100%;
            padding: 8px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            font-size: 14px;
        }
        
        input[type="range"] {
            padding: 0;
        }
        
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #f9fafb;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .radio-option:hover {
            background: #f3e8ff;
        }
        
        .radio-option input {
            margin-right: 10px;
        }
        
        .checkbox-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .checkbox-option input {
            width: 20px;
            height: 20px;
            margin-right: 12px;
        }
        
        .description {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 8px;
        }
        
        .info-box {
            padding: 16px;
            border-radius: 8px;
            background: linear-gradient(135deg, #faf5ff 0%, #eff6ff 100%);
            border: 2px solid #c084fc;
            margin-top: 24px;
        }
        
        .info-box h3 {
            color: #7c3aed;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .graph-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .chart-wrapper {
            flex-shrink: 0;
        }
        
        .table-wrapper {
            flex: 1;
            background: #f9fafb;
            padding: 16px;
            border-radius: 8px;
        }
        
        .table-wrapper h3 {
            color: #374151;
            margin-bottom: 12px;
        }
        
        .data-table-container {
            max-height: 350px;
            overflow-y: auto;
            border-radius: 6px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }
        
        th {
            background: #ddd6fe;
            border: 1px solid #c084fc;
            padding: 8px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        
        td {
            border: 1px solid #d1d5db;
            padding: 8px;
            text-align: center;
            background: white;
        }
        
        tr:hover td {
            background: #faf5ff;
        }
        
        .formula-box {
            background: #eff6ff;
            padding: 16px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .formula-box h3 {
            color: #1e40af;
            margin-bottom: 12px;
        }
        
        .formula {
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            background: white;
            padding: 16px;
            border-radius: 6px;
            border: 2px solid #93c5fd;
            margin-bottom: 12px;
        }
        
        .tips-section {
            background: #fefce8;
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid #facc15;
            margin-top: 20px;
        }
        
        .tips-section ul {
            margin-left: 20px;
            margin-top: 8px;
        }
        
        .tips-section li {
            margin-bottom: 4px;
            color: #374151;
        }
        
        .bottom-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 30px;
        }
        
        .card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .card h3 {
            color: #7c3aed;
            margin-bottom: 8px;
        }
        
        .card p {
            font-size: 0.875rem;
            color: #6b7280;
            line-height: 1.5;
        }
        
        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .graph-container {
                flex-direction: column;
            }
            
            .bottom-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <font color = "blue" size="2">ë¶€ì‚°ì§„ì—¬ììƒì—…ê³ ë“±í•™êµ ì¸ê³µì§€ëŠ¥ê¸°ì´ˆ í•™ìŠµìë£Œ</font>
        <h1>ğŸ“ ì„ í˜•íšŒê·€ë€ ë¬´ì—‡ì¼ê¹Œìš”?</h1>
        <p class="subtitle">ì„ í˜•íšŒê·€ëŠ” <font color="blue"><B>ë°ì´í„°ë¥¼ ê°€ì¥ ì˜ í†µê³¼í•˜ëŠ” ì§ì„ </B></font>ì„ ì°¾ëŠ” ê²ƒ. ì¦‰, ê° ë°ì´í„° ì ê³¼ ì§ì„  ì‚¬ì´ì˜ ì˜¤ì°¨ê°€ ê°€ì¥ ì‘ì•„ì§€ëŠ” ì§ì„ ì„ ì°¾ëŠ” ê±°ì˜ˆìš”. ì„¤ì •ì„ ë°”ê¿”ê°€ë©° ì„ ì´ ì–´ë–»ê²Œ ë‹¬ë¼ì§€ëŠ”ì§€ ê´€ì°°í•´ë³´ì„¸ìš”!</p>
        
        <div class="main-grid">
            <div class="panel">
                <h2>âš™ï¸ ì„¤ì •</h2>
                
                <div class="setting-group purple">
                    <label>ğŸ“Š ë°ì´í„° ì„ íƒ</label>
                    <select id="scenario">
                        <option value="simple">í‚¤ì™€ ëª¸ë¬´ê²Œ (ê°„ë‹¨)</option>
                        <option value="noisy">ê³µë¶€ì‹œê°„ê³¼ ì„±ì  (ë…¸ì´ì¦ˆ ìˆìŒ)</option>
                        <option value="overfit">ê³¼ì í•© ì˜ˆì‹œ (ë¶ˆê·œì¹™)</option>
                    </select>
                    <p class="description" id="scenarioDesc">í‚¤ê°€ í´ìˆ˜ë¡ ëª¸ë¬´ê²Œê°€ ì¦ê°€í•˜ëŠ” ê°„ë‹¨í•œ ê´€ê³„</p>
                </div>
                
                <div class="setting-group blue">
                    <label class="checkbox-option">
                        <input type="checkbox" id="fitIntercept" checked>
                        <span><strong>Fit Intercept (ì ˆí¸ ë§ì¶”ê¸°)</strong></span>
                    </label>
                    <p class="description" id="interceptDesc">âœ… ì„ ì´ yì¶• ì–´ë””ì„œë“  ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”</p>
                </div>
                
                <div class="setting-group">
                    <label>ğŸ¯ ì •ê·œí™” ìœ í˜•</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="regType" value="none" checked>
                            <span>ì •ê·œí™” ì—†ìŒ</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="regType" value="ridge">
                            <span>Ridge (L2)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="regType" value="lasso">
                            <span>Lasso (L1)</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="regType" value="elastic">
                            <span>Elastic Net</span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group yellow" id="alphaGroup" style="display:none;">
                    <label>Alpha (ì •ê·œí™” ê°•ë„): <span id="alphaValue">0.10</span></label>
                    <input type="range" id="alpha" min="0" max="1" step="0.05" value="0.1">
                    <p class="description" id="alphaDesc">ì•½í•œ ì •ê·œí™” - ë°ì´í„°ì— ë” ë§ì¶¤</p>
                </div>
                
                <div class="setting-group green" id="l1RatioGroup" style="display:none;">
                    <label>L1 : L2 ë¹„ìœ¨ = <span id="l1Value">0.50</span> : <span id="l2Value">0.50</span></label>
                    <input type="range" id="l1Ratio" min="0" max="1" step="0.1" value="0.5">
                    <p class="description" id="l1Desc">ê· í˜•ì¡íŒ í˜¼í•©</p>
                </div>
                
                <div class="info-box" id="regInfo">
                    <h3><span id="regEmoji">ğŸ“</span> <span id="regTitle">ì •ê·œí™” ì—†ìŒ</span></h3>
                    <p id="regDesc">ë°ì´í„°ì— ìµœëŒ€í•œ ë”± ë§ê²Œ ì„ ì„ ê·¸ì–´ìš”. ê°„ë‹¨í•œ ë°ì´í„°ì— ì í•©í•´ìš”.</p>
                </div>
            </div>
            
            <div class="panel">
                <h2>ğŸ“ˆ ê²°ê³¼ ê·¸ë˜í”„</h2>
                
                <div class="graph-container">
                    <div class="chart-wrapper">
                        <canvas id="chart" width="450" height="350"></canvas>
                    </div>
                    
                    <div class="table-wrapper">
                        <h3>ğŸ“Š ì‚¬ìš©ëœ ë°ì´í„°</h3>
                        <div class="data-table-container">
                            <table id="dataTable">
                                <thead>
                                    <tr>
                                        <th>ë²ˆí˜¸</th>
                                        <th id="xHeader">í‚¤ (cm)</th>
                                        <th id="yHeader">ëª¸ë¬´ê²Œ (kg)</th>
                                    </tr>
                                </thead>
                                <tbody id="dataBody"></tbody>
                            </table>
                        </div>
                        <p class="description" style="margin-top: 8px;">ì´ <strong id="dataCount">9</strong>ê°œì˜ ë°ì´í„°ë¡œ í•™ìŠµí–ˆì–´ìš”</p>
                    </div>
                </div>
                
                <div class="formula-box">
                    <h3>ğŸ“ ì˜ˆì¸¡ ìˆ˜ì‹</h3>
                    <div class="formula" id="formula">y = 0.00 Ã— x + 0.00</div>
                    <div>
                        <p style="font-size: 0.875rem; color: #374151;">â€¢ ê¸°ìš¸ê¸° (slope): <strong id="slopeValue">0.00</strong></p>
                        <p style="font-size: 0.875rem; color: #374151;">â€¢ ì ˆí¸ (intercept): <strong id="interceptValue">0.00</strong></p>
                    </div>
                </div>
                
                <div class="tips-section">
                    <p style="font-weight: 600; margin-bottom: 4px;">ğŸ’¡ ê´€ì°°í•´ë³´ì„¸ìš”!</p>
                    <ul>
                        <li>ì •ê·œí™”ë¥¼ ê°•í•˜ê²Œ í•˜ë©´ ì„ ì´ ì–´ë–»ê²Œ ë³€í•˜ë‚˜ìš”?</li>
                        <li>ë°ì´í„°ê°€ ë¶ˆê·œì¹™í•  ë•Œ ì–´ë–¤ ì •ê·œí™”ê°€ ì¢‹ì„ê¹Œìš”?</li>
                        <li>ì ˆí¸ì„ ë„ë©´ ì„ ì´ ì–´ë””ë¥¼ ì§€ë‚˜ê°€ë‚˜ìš”?</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="bottom-cards">
            <div class="card">
                <h3><span id="ridgeIcon" class="query-icon">ğŸ¯</span> RidgeëŠ” ì–¸ì œ?</h3>
                <p>ë³€ìˆ˜ê°€ ë§ê³  ì„œë¡œ ê´€ë ¨ì´ ìˆì„ ë•Œ! ëª¨ë“  ë³€ìˆ˜ë¥¼ ì¡°ê¸ˆì”© ì‚¬ìš©í•´ìš”.</p>
            </div>
            <div class="card">
                <h3>ğŸ¯ LassoëŠ” ì–¸ì œ?</h3>
                <p>ì¤‘ìš”í•œ ë³€ìˆ˜ë§Œ ì°¾ê³  ì‹¶ì„ ë•Œ! í•„ìš”ì—†ëŠ” ë³€ìˆ˜ëŠ” ì œê±°í•´ìš”.</p>
            </div>
            <div class="card">
                <h3>ğŸ¯ Elasticì€ ì–¸ì œ?</h3>
                <p>ë‘˜ì˜ ì¥ì ì´ ë‹¤ í•„ìš”í•  ë•Œ! ê· í˜•ì¡íŒ ì„ íƒì„ í•´ìš”.</p>
            </div>
        </div>
    </div>
    <div id="sparrowPopup">ì°¸ìƒˆë‹¤!</div>
    <script>
        // ë°ì´í„° ì •ì˜
        const scenarios = {
            simple: {
                name: 'í‚¤ì™€ ëª¸ë¬´ê²Œ',
                data: [
                    {x: 140, y: 35}, {x: 145, y: 38}, {x: 150, y: 42}, 
                    {x: 155, y: 45}, {x: 160, y: 50}, {x: 165, y: 55},
                    {x: 170, y: 60}, {x: 175, y: 65}, {x: 180, y: 70}
                ],
                xLabel: 'í‚¤ (cm)',
                yLabel: 'ëª¸ë¬´ê²Œ (kg)',
                description: 'í‚¤ê°€ í´ìˆ˜ë¡ ëª¸ë¬´ê²Œê°€ ì¦ê°€í•˜ëŠ” ê°„ë‹¨í•œ ê´€ê³„'
            },
            noisy: {
                name: 'ê³µë¶€ì‹œê°„ê³¼ ì„±ì ',
                data: [
                    {x: 1, y: 45}, {x: 2, y: 55}, {x: 3, y: 52}, 
                    {x: 4, y: 65}, {x: 5, y: 68}, {x: 6, y: 75},
                    {x: 7, y: 72}, {x: 8, y: 85}, {x: 9, y: 88},
                    {x: 10, y: 95}
                ],
                xLabel: 'ê³µë¶€ì‹œê°„ (ì‹œê°„)',
                yLabel: 'ì„±ì  (ì )',
                description: 'ë°ì´í„°ì— ë…¸ì´ì¦ˆê°€ ìˆëŠ” ê²½ìš°'
            },
            overfit: {
                name: 'ê³¼ì í•© ì˜ˆì‹œ',
                data: [
                    {x: 1, y: 10}, {x: 2, y: 25}, {x: 3, y: 15}, 
                    {x: 4, y: 35}, {x: 5, y: 30}, {x: 6, y: 50},
                    {x: 7, y: 45}, {x: 8, y: 60}, {x: 9, y: 55},
                    {x: 10, y: 70}
                ],
                xLabel: 'X',
                yLabel: 'Y',
                description: 'ë¶ˆê·œì¹™í•œ ë°ì´í„° - ì •ê·œí™”ê°€ í•„ìš”í•œ ê²½ìš°'
            }
        };
        
        // ìƒíƒœ ë³€ìˆ˜
        let currentScenario = 'simple';
        let fitIntercept = true;
        let regType = 'none';
        let alpha = 0.1;
        let l1Ratio = 0.5;
        let chart = null;
        
        // ì°¨íŠ¸ ì´ˆê¸°í™”
        function initChart() {
            const ctx = document.getElementById('chart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: 'ì‹¤ì œ ë°ì´í„°',
                            data: [],
                            backgroundColor: '#8b5cf6',
                            pointRadius: 6
                        },
                        {
                            label: 'ì˜ˆì¸¡ ì„ ',
                            data: [],
                            type: 'line',
                            borderColor: '#ef4444',
                            borderWidth: 3,
                            pointRadius: 0,
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'í‚¤ (cm)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'ëª¸ë¬´ê²Œ (kg)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(1);
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // ì„ í˜•íšŒê·€ ê³„ì‚°
        function calculateRegression() {
            const data = scenarios[currentScenario].data;
            const n = data.length;
            
            let sumX = 0, sumY = 0, sumXY = 0, sumX2 = 0;
            
            data.forEach(point => {
                sumX += point.x;
                sumY += point.y;
                sumXY += point.x * point.y;
                sumX2 += point.x * point.x;
            });
            
            let slope, intercept;
            
            if (regType === 'none') {
                slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
                intercept = fitIntercept ? (sumY - slope * sumX) / n : 0;
            } else if (regType === 'ridge') {
                const regularization = 1 + alpha;
                slope = (n * sumXY - sumX * sumY) / ((n * sumX2 - sumX * sumX) * regularization);
                intercept = fitIntercept ? (sumY - slope * sumX) / n : 0;
            } else if (regType === 'lasso') {
                slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
                const originalSlope = slope;
                
                // Lasso: ê¸°ìš¸ê¸°ë¥¼ ì¤„ì´ë˜, ë§¤ìš° ê°•í•œ ì •ê·œí™”ì¼ ë•Œë§Œ 0ìœ¼ë¡œ
                slope = slope * (1 - alpha * 0.8);
                
                // Alphaê°€ 0.9 ì´ìƒì¼ ë•Œë§Œ ì™„ì „íˆ 0ìœ¼ë¡œ
                if (alpha > 0.9) {
                    slope = 0;
                }
                
                intercept = fitIntercept ? (sumY - slope * sumX) / n : 0;
            } else if (regType === 'elastic') {
                const ridgePart = 1 + alpha * (1 - l1Ratio);
                slope = (n * sumXY - sumX * sumY) / ((n * sumX2 - sumX * sumX) * ridgePart);
                
                // Lasso íš¨ê³¼: ê¸°ìš¸ê¸° ê°ì†Œ
                slope = slope * (1 - alpha * l1Ratio * 0.8);
                
                // ë§¤ìš° ê°•í•œ Lasso ì •ê·œí™”ì¼ ë•Œë§Œ 0ìœ¼ë¡œ
                if (alpha > 0.9 && l1Ratio > 0.7) {
                    slope = 0;
                }
                
                intercept = fitIntercept ? (sumY - slope * sumX) / n : 0;
            }
            
            return { slope, intercept };
        }
        
        // ê·¸ë˜í”„ ì—…ë°ì´íŠ¸
        function updateChart() {
            const scenario = scenarios[currentScenario];
            const data = scenario.data;
            const { slope, intercept } = calculateRegression();
            
            // íšŒê·€ì„  ë°ì´í„°
            const minX = Math.min(...data.map(d => d.x));
            const maxX = Math.max(...data.map(d => d.x));
            const lineData = [
                { x: minX, y: slope * minX + intercept },
                { x: maxX, y: slope * maxX + intercept }
            ];
            
            // Yì¶• ë²”ìœ„ ê³„ì‚° (ì‹¤ì œ ë°ì´í„°ë¥¼ ê¸°ë³¸ìœ¼ë¡œ, ì ˆí¸ ì—†ì„ ë•ŒëŠ” 0 í¬í•¨)
            const yValues = data.map(d => d.y);
            let minY = Math.min(...yValues);
            let maxY = Math.max(...yValues);
            
            // ì ˆí¸ì´ ì—†ìœ¼ë©´(ì›ì  í†µê³¼) Yì¶•ì— 0ê³¼ íšŒê·€ì„  ê°’ë“¤ í¬í•¨
            if (!fitIntercept) {
                const lineYValues = lineData.map(d => d.y);
                minY = Math.min(0, minY, ...lineYValues);
                maxY = Math.max(maxY, ...lineYValues);
            }
            
            const yPadding = (maxY - minY) * 0.15;
            
            // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            chart.data.datasets[0].data = data;
            chart.data.datasets[1].data = lineData;
            chart.options.scales.x.title.text = scenario.xLabel;
            chart.options.scales.y.title.text = scenario.yLabel;
            chart.options.scales.y.min = minY - yPadding;
            chart.options.scales.y.max = maxY + yPadding;
            chart.update();
            
            // ìˆ˜ì‹ ì—…ë°ì´íŠ¸
            const sign = intercept >= 0 ? '+' : '';
            document.getElementById('formula').textContent = 
                `y = ${slope.toFixed(2)} Ã— x ${sign} ${intercept.toFixed(2)}`;
            document.getElementById('slopeValue').textContent = slope.toFixed(2);
            document.getElementById('interceptValue').textContent = intercept.toFixed(2);
        }
        
        // í…Œì´ë¸” ì—…ë°ì´íŠ¸
        function updateTable() {
            const scenario = scenarios[currentScenario];
            const tbody = document.getElementById('dataBody');
            tbody.innerHTML = '';
            
            scenario.data.forEach((point, index) => {
                const row = tbody.insertRow();
                row.insertCell(0).textContent = index + 1;
                row.insertCell(1).textContent = point.x;
                row.insertCell(2).textContent = point.y;
            });
            
            document.getElementById('xHeader').textContent = scenario.xLabel;
            document.getElementById('yHeader').textContent = scenario.yLabel;
            document.getElementById('dataCount').textContent = scenario.data.length;
        }
        
        // ì •ê·œí™” ì„¤ëª… ì—…ë°ì´íŠ¸
        function updateRegInfo() {
            const infos = {
                none: {
                    emoji: 'ğŸ“',
                    title: 'ì •ê·œí™” ì—†ìŒ',
                    desc: 'ë°ì´í„°ì— ìµœëŒ€í•œ ë”± ë§ê²Œ ì„ ì„ ê·¸ì–´ìš”. ê°„ë‹¨í•œ ë°ì´í„°ì— ì í•©í•´ìš”.'
                },
                ridge: {
                    emoji: 'ğŸ”ï¸',
                    title: 'Ridge (ë¦¿ì§€)',
                    desc: 'ê¸°ìš¸ê¸°ë¥¼ ë¶€ë“œëŸ½ê²Œ ë§Œë“¤ì–´ìš”. ê·¹ë‹¨ì ì¸ ê°’ì„ ë°©ì§€í•˜ê³  ì•ˆì •ì ì¸ ì˜ˆì¸¡ì„ í•´ìš”.'
                },
                lasso: {
                    emoji: 'ğŸ¯',
                    title: 'Lasso (ë¼ì˜)',
                    desc: 'ì¤‘ìš”í•˜ì§€ ì•Šì€ ë³€ìˆ˜ëŠ” 0ìœ¼ë¡œ ë§Œë“¤ì–´ìš”. ì •ë§ ì¤‘ìš”í•œ íŠ¹ì§•ë§Œ ì„ íƒí•´ìš”.'
                },
                elastic: {
                    emoji: 'ğŸ¨',
                    title: 'Elastic Net',
                    desc: 'Ridgeì™€ Lassoì˜ ì¥ì ì„ ì„ì—ˆì–´ìš”. ê· í˜•ì¡íŒ ì˜ˆì¸¡ì„ í•´ìš”.'
                }
            };
            
            const info = infos[regType];
            document.getElementById('regEmoji').textContent = info.emoji;
            document.getElementById('regTitle').textContent = info.title;
            document.getElementById('regDesc').textContent = info.desc;
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('scenario').addEventListener('change', (e) => {
            currentScenario = e.target.value;
            document.getElementById('scenarioDesc').textContent = scenarios[currentScenario].description;
            updateTable();
            updateChart();
        });
        
        document.getElementById('fitIntercept').addEventListener('change', (e) => {
            fitIntercept = e.target.checked;
            document.getElementById('interceptDesc').textContent = 
                fitIntercept ? 'âœ… ì„ ì´ yì¶• ì–´ë””ì„œë“  ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”' : 'âŒ ì„ ì´ ì›ì (0,0)ì„ ì§€ë‚˜ê°€ì•¼ í•´ìš”';
            updateChart();
        });
        
        document.querySelectorAll('input[name="regType"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                regType = e.target.value;
                document.getElementById('alphaGroup').style.display = 
                    regType !== 'none' ? 'block' : 'none';
                document.getElementById('l1RatioGroup').style.display = 
                    regType === 'elastic' ? 'block' : 'none';
                updateRegInfo();
                updateChart();
            });
        });
        
        document.getElementById('alpha').addEventListener('input', (e) => {
            alpha = parseFloat(e.target.value);
            document.getElementById('alphaValue').textContent = alpha.toFixed(2);
            
            const desc = alpha < 0.3 ? 'ì•½í•œ ì •ê·œí™” - ë°ì´í„°ì— ë” ë§ì¶¤' :
                        alpha < 0.7 ? 'ì¤‘ê°„ ì •ê·œí™” - ê· í˜•ì¡í˜' :
                        'ê°•í•œ ì •ê·œí™” - ë” ë‹¨ìˆœí•œ ì„ ';
            document.getElementById('alphaDesc').textContent = desc;
            updateChart();
        });
        
        document.getElementById('l1Ratio').addEventListener('input', (e) => {
            l1Ratio = parseFloat(e.target.value);
            document.getElementById('l1Value').textContent = l1Ratio.toFixed(2);
            document.getElementById('l2Value').textContent = (1 - l1Ratio).toFixed(2);
            
            const desc = l1Ratio < 0.3 ? 'Ridgeì— ê°€ê¹Œì›€ (ëª¨ë“  ë³€ìˆ˜ ì‚¬ìš©)' :
                        l1Ratio < 0.7 ? 'ê· í˜•ì¡íŒ í˜¼í•©' :
                        'Lassoì— ê°€ê¹Œì›€ (ë³€ìˆ˜ ì„ íƒ)';
            document.getElementById('l1Desc').textContent = desc;
            updateChart();
        });
        
        // [ìˆ˜ì •] ğŸ¯ ì•„ì´ì½˜ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ - ìœ„ì¹˜ë¥¼ ê³„ì‚°í•˜ì—¬ íˆ´íŒì²˜ëŸ¼ í‘œì‹œ
        document.addEventListener('DOMContentLoaded', () => {
            const ridgeIcon = document.getElementById('ridgeIcon'); 
            const sparrowPopup = document.getElementById('sparrowPopup');
            
            if (ridgeIcon && sparrowPopup) {
                ridgeIcon.addEventListener('click', (event) => {
                    event.stopPropagation(); 
                    
                    // 1. ì•„ì´ì½˜ì˜ í™”ë©´ ë‚´ ìœ„ì¹˜ë¥¼ ì •í™•íˆ ê³„ì‚°
                    const rect = ridgeIcon.getBoundingClientRect(); 
                    
                    // 2. íŒì—… ìœ„ì¹˜ë¥¼ ì•„ì´ì½˜ì˜ ì˜¤ë¥¸ìª½ ì•„ë˜ì— ì˜¤ë„ë¡ ì„¤ì •
                    // íŒì—…ì˜ positionì´ absoluteì´ë¯€ë¡œ, window.scrollY/Xë¥¼ ë”í•´ì¤˜ì•¼ í˜„ì¬ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ë°˜ì˜í•œ ì •í™•í•œ ìœ„ì¹˜ê°€ ë©ë‹ˆë‹¤.
                    sparrowPopup.style.left = `${rect.left + window.scrollX}px`;
                    sparrowPopup.style.top = `${rect.bottom + window.scrollY + 5}px`; // ì•„ì´ì½˜ ì•„ë˜ 5px ê°„ê²©
                    
                    // íŒì—… í‘œì‹œ
                    sparrowPopup.classList.add('show');
                    
                    // 0.5ì´ˆ(500ms) í›„ì— íŒì—… ìˆ¨ê¹€ ì˜ˆì•½
                    setTimeout(() => {
                        sparrowPopup.classList.remove('show');
                    }, 500); 
                });
            }
        });

        // ì´ˆê¸°í™”
        initChart();
        updateTable();
        updateChart();
    </script>
    
</body>
</html>